<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>login</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" media="screen" rel="stylesheet">
    <link href="/static/css/global.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
</head>
<body id="app">
<div class="container">
    <div class="content-box">
        <div>
            <img src="/static/img/app-icon.png" class="img-circle img-responsive ava center-block app-icon" alt="icon">
        </div>
        <form role="form" action="/login" method="post" onsubmit="return submitCheck()">
            <div class="form-group">
                <h2 class="form-signin-heading">
                    请登录
                </h2>
                <!--登录错误提示信息-->
                <label for="inputEmail" class="sr-only">Email address</label>
                <input id="inputEmail" type="text" name="username" class="form-control form-item"
                       placeholder="请输入邮件" required autofocus>

                <label for="inputPassword" class="sr-only">Password</label>
                <input id="inputPassword" type="password" name="password" class="form-control form-item"
                       placeholder="请输入密码" required>

                <div class="error_tip" th:if="${param.error}">
                    <span  class="help-block" style="color:red;" th:text="${session.SPRING_SECURITY_LAST_EXCEPTION.message}">
                        邮箱或者密码不正确，请重新输入！
                    </span>
                </div>
<!--                <div class="error_tip" th:if="${param.error}">-->
<!--&lt;!&ndash;                    <span  class="help-block" style="color:red;" th:text="${JSON.toJSONString(session)}">&ndash;&gt;-->

<!--&lt;!&ndash;                    </span>&ndash;&gt;-->
<!--                </div>-->
                <div class="error_tip" th:if="${param.timeout}">
                    <span  class="help-block" style="color:red;">
                        会话过期，请重新登录！
                    </span>
                </div>
            </div>
            <div>
                <button class="btn btn-primary btn-block form-item" type="submit">立即登录</button>
            </div>
        </form>
    </div>
</div>

</body>
<script>
    let language = navigator.language;
    console.log("浏览器语言："+language)
    let submitCount = 0;
    function submitCheck() {
        // let submitButton = document.getElementById("sb-btn");
        if (submitCount === 0) {
            submitCount++;
            return true;
        }
        alert("处理中，请不要重复提交，谢谢！");
        return false;
    }
</script>
<style>

    .app-icon {
        width: 100px;
        height: 100px;
        margin-bottom: 20px;
    }


    .form-item {
        margin: 10px 0;
        height: 50px;
        border-radius: 0;
    }


</style>

</html>
